!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";var n={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},s="a".charCodeAt();e.parse=function(t,e,r){var o={},i=0,a=0,c=0,l=r&&r.bigint&&"undefined"!=typeof BigInt;return{data:u("",!0),pointers:o};function u(e,r){var n;h(),E(e,"value");var s=p();switch(s){case"t":d("rue"),n=!0;break;case"f":d("alse"),n=!1;break;case"n":d("ull"),n=null;break;case'"':n=f();break;case"[":n=function(t){h();var e=[],r=0;if("]"==p())return e;b();for(;;){var n=t+"/"+r;e.push(u(n)),h();var s=p();if("]"==s)break;","!=s&&k(),h(),r++}return e}(e);break;case"{":n=function(t){h();var e={};if("}"==p())return e;b();for(;;){var r=w();'"'!=p()&&k();var n=f(),s=t+"/"+v(n);m(s,"key",r),E(s,"keyEnd"),h(),":"!=p()&&k(),h(),e[n]=u(s),h();var o=p();if("}"==o)break;","!=o&&k(),h()}return e}(e);break;default:b(),"-0123456789".indexOf(s)>=0?n=function(){var e="",r=!0;"-"==t[c]&&(e+=p());e+="0"==t[c]?p():g(),"."==t[c]&&(e+=p()+g(),r=!1);"e"!=t[c]&&"E"!=t[c]||(e+=p(),"+"!=t[c]&&"-"!=t[c]||(e+=p()),e+=g(),r=!1);var n=+e;return l&&r&&(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)?BigInt(e):n}():M()}return E(e,"valueEnd"),h(),r&&c<t.length&&M(),n}function h(){t:for(;c<t.length;){switch(t[c]){case" ":a++;break;case"\t":a+=4;break;case"\r":a=0;break;case"\n":a=0,i++;break;default:break t}c++}}function f(){for(var t,e="";'"'!=(t=p());)"\\"==t?(t=p())in n?e+=n[t]:"u"==t?e+=y():k():e+=t;return e}function d(t){for(var e=0;e<t.length;e++)p()!==t[e]&&k()}function p(){O();var e=t[c];return c++,a++,e}function b(){c--,a--}function y(){for(var t=4,e=0;t--;){e<<=4;var r=p().toLowerCase();r>="a"&&r<="f"?e+=r.charCodeAt()-s+10:r>="0"&&r<="9"?e+=+r:k()}return String.fromCharCode(e)}function g(){for(var e="";t[c]>="0"&&t[c]<="9";)e+=p();if(e.length)return e;O(),M()}function E(t,e){m(t,e,w())}function m(t,e,r){o[t]=o[t]||{},o[t][e]=r}function w(){return{line:i,column:a,pos:c}}function M(){throw new SyntaxError("Unexpected token "+t[c]+" in JSON at position "+c)}function k(){b(),M()}function O(){if(c>=t.length)throw new SyntaxError("Unexpected end of JSON input")}},e.stringify=function(t,e,r){if(i(t)){var n,s,o=0,a="object"==typeof r?r.space:r;switch(typeof a){case"number":var c=a>10?10:a<0?0:Math.floor(a);a=c&&w(c," "),n=c,s=c;break;case"string":a=a.slice(0,10),n=0,s=0;for(var l=0;l<a.length;l++){switch(a[l]){case" ":s++;break;case"\t":s+=4;break;case"\r":s=0;break;case"\n":s=0,o++;break;default:throw new Error("whitespace characters not allowed in JSON")}n++}break;default:a=void 0}var u="",h={},f=0,p=0,b=0,y=r&&r.es6&&"function"==typeof Map;return function t(e,r,n){switch(m(n,"value"),typeof e){case"number":case"bigint":case"boolean":g(""+e);break;case"string":g(d(e));break;case"object":null===e?g("null"):"function"==typeof e.toJSON?g(d(e.toJSON())):Array.isArray(e)?s():y?e.constructor.BYTES_PER_ELEMENT?s():e instanceof Map?c():e instanceof Set?c(!0):o():o()}function s(){if(e.length){g("[");for(var s=r+1,o=0;o<e.length;o++){o&&g(","),E(s);var a=i(e[o])?e[o]:null;t(a,s,n+"/"+o)}E(r),g("]")}else g("[]")}function o(){var s=Object.keys(e);if(s.length){g("{");for(var o=r+1,c=0;c<s.length;c++){var l=s[c],u=e[l];if(i(u)){c&&g(",");var h=n+"/"+v(l);E(o),m(h,"key"),g(d(l)),m(h,"keyEnd"),g(":"),a&&g(" "),t(u,o,h)}}E(r),g("}")}else g("{}")}function c(s){if(e.size){g("{");for(var o=r+1,c=!0,l=e.entries(),u=l.next();!u.done;){var h=u.value,f=h[0],p=!!s||h[1];if(i(p)){c||g(","),c=!1;var b=n+"/"+v(f);E(o),m(b,"key"),g(d(f)),m(b,"keyEnd"),g(":"),a&&g(" "),t(p,o,b)}u=l.next()}E(r),g("}")}else g("{}")}m(n,"valueEnd")}(t,0,""),{json:u,pointers:h}}function g(t){p+=t.length,b+=t.length,u+=t}function E(t){if(a){for(u+="\n"+w(t,a),f++,p=0;t--;)o?(f+=o,p=s):p+=s,b+=n;b+=1}}function m(t,e){h[t]=h[t]||{},h[t][e]={line:f,column:p,pos:b}}function w(t,e){return Array(t+1).join(e)}};var o=["number","bigint","boolean","string","object"];function i(t){return o.indexOf(typeof t)>=0}var a=/"|\\/g,c=/[\b]/g,l=/\f/g,u=/\n/g,h=/\r/g,f=/\t/g;function d(t){return'"'+(t=t.replace(a,"\\$&").replace(l,"\\f").replace(c,"\\b").replace(u,"\\n").replace(h,"\\r").replace(f,"\\t"))+'"'}var p=/~/g,b=/\//g;function v(t){return t.replace(p,"~0").replace(b,"~1")}},function(t,e,r){"use strict";r.r(e);var n={BLOCK:"block",ELEM:"elem",CONTENT:"content",MODS:"mods",MIX:"mix",ELEMMODS:"elemMods"},s=r(0);class o extends Error{constructor(){super("Invalid input")}}Error;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const{CONTENT:a}=n,c=Symbol("Position");class l{constructor(t){i(this,"getJson",()=>{try{const t=Object(s.parse)(this.str);this.json=t.data,this.pointers=t.pointers}catch(t){throw new o}return this.match(this.json,""),this.json}),i(this,"match",(t,e)=>{const{value:r,valueEnd:n}=this.pointers[e],[s,o]=[r,n].map(t=>({line:t.line,column:t.column+1})),i=t[a];t[c]={start:s,end:o},i&&(Array.isArray(i)?i.forEach((t,r)=>{this.match(t,`${e}/${a}/${r}`)}):this.match(i,`${e}/${a}`))}),this.str=t,this.json=null,this.pointers=null}}i(l,"key",c);var u=l;const{BLOCK:h,ELEM:f,CONTENT:d,MODS:p,MIX:b,ELEMMODS:v}=n,y=u.key;var g=class{constructor(t){this.block=t[h],this.elem=t[f],this.mods=t[p],this.mix=t[b],this.elemMods=t[v],this.location=t[y],this.selector=this.block+(this.elem?`__${this.elem}`:"")}};class E{constructor(t=[]){this.selectors=t}getSelectors(){return this.selectors}getPhaseHandlersMap(){throw"not implemented"}}E.prototype.phases={in:"in",out:"out",end:"end"},E.HandlerType,E.HandlersMapType;var m=E;m.prototype.phases;var w=class{constructor(t){this.rules=t,this.handlersMap={},this.buildMap()}buildMap(){this.rules.forEach(t=>{const e=t.getSelectors(),r=t.getPhaseHandlersMap();for(let t in r){const n=r[t];e.forEach(e=>{const r=this.getKey(t,e);this.handlersMap[r]||(this.handlersMap[r]=[]),this.handlersMap[r].push(n)})}})}getKey(t,e){return t+"$"+e}call(t,e){const r=this.getKey(t,e.selector),n=this.handlersMap[r]||[];let s=[];return n.forEach(t=>{const r=t(e);r&&(Array.isArray(r)?s=[...r,...s]:s.push(r))}),s}callAll(t){const e=[];return this.rules.forEach(r=>{const n=r.getPhaseHandlersMap()[t];n&&e.push(n(null))}),e.filter(t=>t)}};function M(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const{CONTENT:k}=n,O=m.prototype.phases;function N(t,...e){if(!t||"object"!=typeof t)return;let r=t;for(let t of e)if(r=r[t],void 0===t)return;return r}var x=class{constructor({code:t,error:e,location:r}){this.code=t,this.error=e,this.location=r}};class S extends x{constructor(t){super({code:"TEXT.SEVERAL_H1",error:"Заголовок первого уровня на странице должен быть единственным.",location:t})}}class A extends x{constructor(t){super({code:"TEXT.INVALID_H2_POSITION",error:"Заголовок второго уровня не может находиться перед заголовком первого уровня.",location:t})}}class T extends x{constructor(t){super({code:"TEXT.INVALID_H3_POSITION",error:"Заголовок третьего уровня не может находиться перед заголовком второго уровня.",location:t})}}const j=new class{constructor(t=[]){M(this,"attachRoot",t=>`{"${k}":\n${t}\n}`),M(this,"next",t=>{const e=new g(t),r=this.contentAsArray(t[k]);this.call(O.in,e),r.map(t=>{this.next(t)}),this.call(O.out,e)}),this.ruleClasses=t,this.mediator=null,this.errors=[]}lint(t){this.init();const e=this.attachRoot(t),r=new u(e).getJson(e);return this.next(r),this.callAll(O.end),this.errors}init(){const t=this.ruleClasses.map(t=>new t);this.mediator=new w(t),this.errors=[]}call(t,e){const r=this.mediator.call(t,e);this.addErrors(r)}callAll(t){const e=this.mediator.callAll(t);this.addErrors(e)}addErrors(t){this.errors=[...t,...this.errors]}contentAsArray(t){return Array.isArray(t)?t:t?[t]:[]}}([class extends m{constructor(){super(["text"]),this.h1was=!1}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this)}}in(t){if("h1"===N(t.mods,"type")){if(this.h1was)return new S(t.location);this.h1was=!0}}},class extends m{constructor(){super(["text"]),this.h2Nodes=[],this.h1was=!1}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this)}}in(t){const e=N(t.mods,"type");if(e)if("h2"!==e){if("h1"===e&&!this.h1was){this.h1was=!0;const t=[];if(this.h2Nodes.forEach(e=>{const r=new A(e.location);t.push(r)}),t.length)return t}}else this.h2Nodes.push(t)}},class extends m{constructor(){super(["text"]),this.h3Nodes=[],this.h2was=!1}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this)}}in(t){const e=N(t.mods,"type");if(e)if("h3"!==e){if("h2"===e&&!this.h2was){this.h2was=!0;const t=[];if(this.h3Nodes.forEach(e=>{const r=new T(e.location);t.push(r)}),t.length)return t}}else this.h3Nodes.push(t)}}]);window.lint=function(t){return j.lint(t)}}]);