!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var r={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},s="a".charCodeAt();e.parse=function(t,e,n){var i={},o=0,a=0,h=0,c=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:l("",!0),pointers:i};function l(e,n){var r;u(),x(e,"value");var s=f();switch(s){case"t":p("rue"),r=!0;break;case"f":p("alse"),r=!1;break;case"n":p("ull"),r=null;break;case'"':r=d();break;case"[":r=function(t){u();var e=[],n=0;if("]"==f())return e;g();for(;;){var r=t+"/"+n;e.push(l(r)),u();var s=f();if("]"==s)break;","!=s&&m(),u(),n++}return e}(e);break;case"{":r=function(t){u();var e={};if("}"==f())return e;g();for(;;){var n=y();'"'!=f()&&m();var r=d(),s=t+"/"+b(r);v(s,"key",n),x(s,"keyEnd"),u(),":"!=f()&&m(),u(),e[r]=l(s),u();var i=f();if("}"==i)break;","!=i&&m(),u()}return e}(e);break;default:g(),"-0123456789".indexOf(s)>=0?r=function(){var e="",n=!0;"-"==t[h]&&(e+=f());e+="0"==t[h]?f():M(),"."==t[h]&&(e+=f()+M(),n=!1);"e"!=t[h]&&"E"!=t[h]||(e+=f(),"+"!=t[h]&&"-"!=t[h]||(e+=f()),e+=M(),n=!1);var r=+e;return c&&n&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)?BigInt(e):r}():E()}return x(e,"valueEnd"),u(),n&&h<t.length&&E(),r}function u(){t:for(;h<t.length;){switch(t[h]){case" ":a++;break;case"\t":a+=4;break;case"\r":a=0;break;case"\n":a=0,o++;break;default:break t}h++}}function d(){for(var t,e="";'"'!=(t=f());)"\\"==t?(t=f())in r?e+=r[t]:"u"==t?e+=w():m():e+=t;return e}function p(t){for(var e=0;e<t.length;e++)f()!==t[e]&&m()}function f(){N();var e=t[h];return h++,a++,e}function g(){h--,a--}function w(){for(var t=4,e=0;t--;){e<<=4;var n=f().toLowerCase();n>="a"&&n<="f"?e+=n.charCodeAt()-s+10:n>="0"&&n<="9"?e+=+n:m()}return String.fromCharCode(e)}function M(){for(var e="";t[h]>="0"&&t[h]<="9";)e+=f();if(e.length)return e;N(),E()}function x(t,e){v(t,e,y())}function v(t,e,n){i[t]=i[t]||{},i[t][e]=n}function y(){return{line:o,column:a,pos:h}}function E(){throw new SyntaxError("Unexpected token "+t[h]+" in JSON at position "+h)}function m(){g(),E()}function N(){if(h>=t.length)throw new SyntaxError("Unexpected end of JSON input")}},e.stringify=function(t,e,n){if(o(t)){var r,s,i=0,a="object"==typeof n?n.space:n;switch(typeof a){case"number":var h=a>10?10:a<0?0:Math.floor(a);a=h&&y(h," "),r=h,s=h;break;case"string":a=a.slice(0,10),r=0,s=0;for(var c=0;c<a.length;c++){switch(a[c]){case" ":s++;break;case"\t":s+=4;break;case"\r":s=0;break;case"\n":s=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}r++}break;default:a=void 0}var l="",u={},d=0,f=0,g=0,w=n&&n.es6&&"function"==typeof Map;return function t(e,n,r){switch(v(r,"value"),typeof e){case"number":case"bigint":case"boolean":M(""+e);break;case"string":M(p(e));break;case"object":null===e?M("null"):"function"==typeof e.toJSON?M(p(e.toJSON())):Array.isArray(e)?s():w?e.constructor.BYTES_PER_ELEMENT?s():e instanceof Map?h():e instanceof Set?h(!0):i():i()}function s(){if(e.length){M("[");for(var s=n+1,i=0;i<e.length;i++){i&&M(","),x(s);var a=o(e[i])?e[i]:null;t(a,s,r+"/"+i)}x(n),M("]")}else M("[]")}function i(){var s=Object.keys(e);if(s.length){M("{");for(var i=n+1,h=0;h<s.length;h++){var c=s[h],l=e[c];if(o(l)){h&&M(",");var u=r+"/"+b(c);x(i),v(u,"key"),M(p(c)),v(u,"keyEnd"),M(":"),a&&M(" "),t(l,i,u)}}x(n),M("}")}else M("{}")}function h(s){if(e.size){M("{");for(var i=n+1,h=!0,c=e.entries(),l=c.next();!l.done;){var u=l.value,d=u[0],f=!!s||u[1];if(o(f)){h||M(","),h=!1;var g=r+"/"+b(d);x(i),v(g,"key"),M(p(d)),v(g,"keyEnd"),M(":"),a&&M(" "),t(f,i,g)}l=c.next()}x(n),M("}")}else M("{}")}v(r,"valueEnd")}(t,0,""),{json:l,pointers:u}}function M(t){f+=t.length,g+=t.length,l+=t}function x(t){if(a){for(l+="\n"+y(t,a),d++,f=0;t--;)i?(d+=i,f=s):f+=s,g+=r;g+=1}}function v(t,e){u[t]=u[t]||{},u[t][e]={line:d,column:f,pos:g}}function y(t,e){return Array(t+1).join(e)}};var i=["number","bigint","boolean","string","object"];function o(t){return i.indexOf(typeof t)>=0}var a=/"|\\/g,h=/[\b]/g,c=/\f/g,l=/\n/g,u=/\r/g,d=/\t/g;function p(t){return'"'+(t=t.replace(a,"\\$&").replace(c,"\\f").replace(h,"\\b").replace(l,"\\n").replace(u,"\\r").replace(d,"\\t"))+'"'}var f=/~/g,g=/\//g;function b(t){return t.replace(f,"~0").replace(g,"~1")}},function(t,e,n){"use strict";n.r(e);var r={BLOCK:"block",ELEM:"elem",CONTENT:"content",MODS:"mods",MIX:"mix",ELEMMODS:"elemMods"},s=n(0);class i extends Error{constructor(){super("Invalid input")}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{CONTENT:a}=r,h=Symbol("Position");class c{constructor(t){o(this,"getJson",()=>{try{const t=Object(s.parse)(this.str);this.json=t.data,this.pointers=t.pointers}catch(t){throw new i}return this.match(this.json,""),this.json}),o(this,"match",(t,e)=>{const{value:n,valueEnd:r}=this.pointers[e],[s,i]=[n,r].map(t=>({line:t.line,column:t.column+1})),o=t[a];t[h]={start:s,end:i},o&&(Array.isArray(o)?o.forEach((t,n)=>{this.match(t,`${e}/${a}/${n}`)}):this.match(o,`${e}/${a}`))}),this.str=t,this.json=null,this.pointers=null}}o(c,"key",h);var l=c;const{BLOCK:u,ELEM:d,CONTENT:p,MODS:f,MIX:g,ELEMMODS:b}=r,w=l.key;var M=class{constructor(t,e){this.block=t[u],this.elem=t[d],this.mods=t[f],this.mix=t[g],this.elemMods=t[b],this.location=t[w],this.parent=e,this.selector=this.block+(this.elem?`__${this.elem}`:"")}};class x{constructor(t=[]){this.selectors=t}getSelectors(){return this.selectors}getPhaseHandlersMap(){throw"not implemented"}}x.prototype.phases={in:"in",out:"out",end:"end"},x.HandlerType,x.HandlersMapType;var v=x;const y=v.prototype.phases;var E=class{constructor(t){this.rules=t,this.handlersMap={},this.alwaysCalledHandlers=[],this.buildMap()}buildMap(){this.rules.forEach(t=>{const e=t.getSelectors(),n=t.getPhaseHandlersMap();for(let t in n){const r=n[t];e.length||t===y.end?e.forEach(e=>{const n=this.getKey(t,e);this.handlersMap[n]||(this.handlersMap[n]=[]),this.handlersMap[n].push(r)}):this.alwaysCalledHandlers.push(r)}})}getKey(t,e){return t+"$"+e}call(t,e){const n=this.getKey(t,e.selector);let r=this.handlersMap[n]||[],s=[];return r=[...r,...this.alwaysCalledHandlers],r.forEach(t=>{const n=t(e);s=this.getMergedErrors(s,n)}),s}callAll(t){let e=[];return this.rules.forEach(n=>{const r=n.getPhaseHandlersMap()[t];if(!r)return;const s=r(null);e=this.getMergedErrors(e,s)}),e}getMergedErrors(t,e){return e?Array.isArray(e)?[...t,...e]:[...t,e]:t}};function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{CONTENT:N}=r,k=v.prototype.phases;const T=["xxxs","xxs","xs","s","m","l","xl","xxl","xxxl","xxxxl","xxxxxl"];class H{constructor(t){this.size=t}add(t){let e=T.indexOf(this.size);return~e&&(e+=t),this.size=T[e],this}check(t){return!(!this.size||!t)&&this.size===t}}function O(t,...e){if(!t||"object"!=typeof t)return;let n=t;for(let t of e)if(n=n[t],void 0===t)return;return n}var P=class{constructor({code:t,error:e,location:n}){this.code=t,this.error=e,this.location=n}};class _ extends P{constructor(t){super({code:"WARNING.TEXT_SIZES_SHOULD_BE_EQUAL",error:"Тексты в блоке warning должны быть одного размера.",location:t})}}class S extends P{constructor(t){super({code:"WARNING.INVALID_BUTTON_SIZE",error:"Размер кнопки в блоке warning должен быть на 1 шаг больше эталонного.",location:t})}}class A extends P{constructor(t){super({code:"WARNING.INVALID_BUTTON_POSITION",error:"Блок button в блоке warning должен быть после блока placeholder.",location:t})}}class I extends P{constructor(t){super({code:"WARNING.INVALID_PLACEHOLDER_SIZE",error:"Допустимые размеры для блока placeholder в блоке warning: s, m, l.",location:t})}}class L extends P{constructor(t){super({code:"TEXT.SEVERAL_H1",error:"Заголовок первого уровня на странице должен быть единственным.",location:t})}}class j extends P{constructor(t){super({code:"TEXT.INVALID_H2_POSITION",error:"Заголовок второго уровня не может находиться перед заголовком первого уровня.",location:t})}}class C extends P{constructor(t){super({code:"GRID.TOO_MUCH_MARKETING_BLOCKS",error:"Маркетинговые блоки не могут занимать больше половины от всех колонок блока grid",location:t})}}const R=["s","m","l"];const W=["commercial","offer"];const z=new class{constructor(t=[]){m(this,"attachRoot",t=>`{"${N}":\n${t}\n}`),m(this,"next",(t,e)=>{const n=new M(t,e),r=this.contentAsArray(t[N]);this.call(k.in,n),r.map(t=>{this.next(t,n)}),this.call(k.out,n)}),this.ruleClasses=t,this.mediator=null,this.errors=[]}lint(t){this.init();const e=this.attachRoot(t),n=new l(e).getJson(e);return this.next(n,null),this.callAll(k.end),this.errors}init(){const t=this.ruleClasses.map(t=>new t);this.mediator=new E(t),this.errors=[]}call(t,e){const n=this.mediator.call(t,e);this.addErrors(n)}callAll(t){const e=this.mediator.callAll(t);this.addErrors(e)}addErrors(t){this.errors=[...t,...this.errors]}contentAsArray(t){return Array.isArray(t)?t.flat(1/0):t?[t]:[]}}([class extends v{constructor(){super(["warning","text"]),this.warnings=[],this.textNodes=new Map}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.out]:this.out.bind(this)}}in(t){if("warning"===t.block)return void this.warnings.push(t);const e=this.getLastWarning();e&&(this.textNodes.has(e)||this.textNodes.set(e,[]),this.textNodes.get(e).push(t))}out(t){if("warning"!==t.block)return;const e=this.warnings.pop(),n=this.textNodes.get(e);if(this.textNodes.delete(e),!n)return;const[r,...s]=n,i=O(r.mods,"size"),o=new H(i);for(let e of s){const n=O(e.mods,"size");if(!o.check(n))return new _(t.location)}}getLastWarning(){const t=this.warnings.length;return this.warnings[t-1]}},class extends v{constructor(){super(["warning","button","text"]),this.warnings=[],this.textNodes=new Map,this.buttonNodes=new Map}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.out]:this.out.bind(this)}}in(t){if("warning"===t.block)return void this.warnings.push(t);const e=this.getLastWarning();e&&("text"!==t.block?(this.buttonNodes.has(e)||this.buttonNodes.set(e,[]),this.buttonNodes.get(e).push(t)):this.textNodes.has(e)||this.textNodes.set(e,t))}out(t){if("warning"!==t.block)return;const e=this.warnings.pop(),n=this.textNodes.get(e),r=this.buttonNodes.get(e);if(!r)return;if(this.textNodes.delete(e),this.buttonNodes.delete(e),!n)return;const s=O(n.mods,"size"),i=new H(s);i.add(1);const o=[];for(let t of r){const e=O(t.mods,"size");if(!i.check(e)){const e=new S(t.location);o.push(e)}}return o}getLastWarning(){const t=this.warnings.length;return this.warnings[t-1]}},class extends v{constructor(){super(["warning","button","placeholder"]),this.warnings=[],this.placeholderNodes=new Map,this.buttonNodes=new Map}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.out]:this.out.bind(this)}}in(t){if("warning"===t.block)return void this.warnings.push(t);const e=this.getLastWarning();if(e)if("placeholder"!==t.block)"button"===t.block&&(this.buttonNodes.has(e)||this.buttonNodes.set(e,t));else if(!this.placeholderNodes.has(e)){const n=this.buttonNodes.get(e);if(this.placeholderNodes.set(e,t),n)return new A(n.location)}}out(t){if("warning"!==t.block)return;const e=this.warnings.pop();this.buttonNodes.delete(e),this.placeholderNodes.delete(e)}getLastWarning(){const t=this.warnings.length;return this.warnings[t-1]}},class extends v{constructor(){super(["warning","placeholder"]),this.warnings=[]}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.out]:this.out.bind(this)}}in(t){if("warning"===t.block)return void this.warnings.push(t);if(!this.getLastWarning())return;const e=O(t.mods,"size");return-1===R.indexOf(e)?new I(t.location):void 0}out(t){if("warning"!==t.block)return;this.warnings.pop()}getLastWarning(){const t=this.warnings.length;return this.warnings[t-1]}},class extends v{constructor(){super(["text"]),this.h1was=!1}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this)}}in(t){if("h1"===O(t.mods,"type")){if(this.h1was)return new L(t.location);this.h1was=!0}}},class extends v{constructor(){super(["text"]),this.h1ToH1ParentMap=new Map,this.h2ParentToH2Map=new Map,this.order=0}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.end]:this.end.bind(this)}}in(t){if(this.isH1(t))this.h1ToH1ParentMap.set(t,{node:t.parent,order:this.order++});else if(this.isH2(t)){const e=t.parent;this.h2ParentToH2Map.has(e)||this.h2ParentToH2Map.set(e,[]),this.h2ParentToH2Map.get(e).push({node:t,order:this.order++})}}end(){const t=new Set;this.h1ToH1ParentMap.forEach(({node:e,order:n})=>{for(let r=e;r;r=r.parent){const e=this.h2ParentToH2Map.get(r);e&&e.forEach(({node:e,order:r})=>{r<n&&t.add(e)})}});const e=[];return t.forEach(t=>{e.push(new j(t.position))}),e}isH1(t){const e=O(t.mods,"type");return e&&"h1"===e}isH2(t){const e=O(t.mods,"type");return e&&"h2"===e}},class extends v{constructor(){super(["text"]),this.h1ToH1ParentMap=new Map,this.h2ParentToH2Map=new Map,this.order=0}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.end]:this.end.bind(this)}}in(t){if(this.isH1(t))this.h1ToH1ParentMap.set(t,{node:t.parent,order:this.order++});else if(this.isH2(t)){const e=t.parent;this.h2ParentToH2Map.has(e)||this.h2ParentToH2Map.set(e,[]),this.h2ParentToH2Map.get(e).push({node:t,order:this.order++})}}end(){const t=new Set;this.h1ToH1ParentMap.forEach(({node:e,order:n})=>{for(let r=e;r;r=r.parent){const e=this.h2ParentToH2Map.get(r);e&&e.forEach(({node:e,order:r})=>{r<n&&t.add(e)})}});const e=[];return t.forEach(t=>{e.push(new j(t.position))}),e}isH1(t){const e=O(t.mods,"type");return e&&"h2"===e}isH2(t){const e=O(t.mods,"type");return e&&"h3"===e}},class extends v{constructor(){super(["grid","grid__fraction",...W]),this.grid=null,this.gridFraction=null,this.totalMarketing=0}getPhaseHandlersMap(){return{[this.phases.in]:this.in.bind(this),[this.phases.out]:this.out.bind(this)}}in(t){if(this.grid&&"grid__fraction"===t.selector)return void(this.gridFraction=t);if("grid"===t.block)return void(this.grid=t);if(!this.gridFraction)return;const e=+O(this.gridFraction.elemMods,"m-col");W.includes(t.block)&&(this.totalMarketing+=e)}out(t){if("grid__fraction"===t.selector)return void(this.gridFraction=null);if("grid"!==t.block)return;const e=+O(t.mods,"m-columns");let n;return 2*this.totalMarketing>=e&&(n=new C(t.location)),this.grid=null,this.gridFraction=null,this.totalMarketing=0,this.totalInfo=0,n}}]);window.lint=function(t){try{return z.lint(t)}catch(t){return[]}}}]);